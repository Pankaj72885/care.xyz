Care.xyz  project overview
Care.xyz  is a web application that lets families in Bangladesh easily book trusted caregiving services for babies, elderly individuals, and people recovering from illness. The platform simplifies discovery, booking, and tracking with a modern interface, strong authentication, and clear status visibility. Care.xyz  supports dark and light mode, mobile-first design, and secure payments.
Care একটি ওয়েব অ্যাপ্লিকেশন যা ব্যবহারকারীদের শিশু, বৃদ্ধ বা অসুস্থ ব্যক্তির জন্য নির্ভরযোগ্য এবং trusted care service বুক করতে সাহায্য করে। লক্ষ্য হচ্ছে caregiving কে সহজ, নিরাপদ এবং অ্যাক্সেসেবল করা।
Goals and scope
·	Core goal: Make caregiving discoverable, safe, and accessible for families with transparent booking and payment.
·	Primary audience: Parents, adult children of elderly, caregivers seeking assignments.
·	Regions & locations: Division, district, city, and area-based availability across Bangladesh.
·	Design priorities: Fast, intuitive UX with Shadcn UI, clear typography, and accessible components in both dark and light themes.
Features and requirements
User-facing features
·	Responsive layout: Mobile, tablet, and desktop views with adaptive content and navigation.
·	Authentication: Email/password and Google signup via NextAuth. Logged-in users should stay authenticated across private routes without forced redirects.
·	Service catalog: Baby Care, Elderly Service, and Sick People Service with structured detail pages.
·	Dynamic booking: Select duration (days/hours), hierarchical location (division → district → city → area), and address; see live cost calculation.
·	Booking lifecycle: Status transitions: Pending → Confirmed → Completed → Cancelled. Users can view and cancel bookings.
·	My bookings: Private page to track bookings with service name, duration, location, total cost, and status.
·	Metadata: SEO-friendly titles and descriptions for home and service pages.
·	Payment & invoice: Stripe card payments; successful payment creates booking and triggers email invoice.
Admin features
·	Admin dashboard: Overview of bookings, payments, and statuses. Payment history browsing and search.
·	Moderation: Update booking status, manage service pricing, and caregiver availability.
Technologies and rationale
·	Next.js  (App Router): File-based routing, server components, metadata API, edge-friendly rendering.
·	TypeScript: Type safety, robust models, and maintainable code.
·	Shadcn UI + Tailwind CSS: Accessible, composable components with consistent theming and rapid iteration.
·	NextAuth: Secure authentication with credentials and Google OAuth provider.
·	Prisma + PostgreSQL: Reliable relational database for bookings, payments, and users.
·	Stripe: Industry-standard payment processing and webhooks for reliable booking creation on payment success.
·	Zod: Runtime validation for requests, forms, and API route safety.
·	Resend (or similar): Transactional emails for invoice delivery and booking notifications.
Architecture and data model
High-level architecture
·	Frontend: Next.js  App Router, Shadcn UI components, Tailwind, server components for SEO and performance.
·	Backend: Next.js  server actions and API routes for auth, booking, payment, and email flows.
·	Database: PostgreSQL managed via Prisma schema and migrations.
·	Payments: Client-side Stripe elements + server-side Stripe webhooks.
·	Email: Server-side invoice sending on booking confirmation.
Core entities
·	User: id, name, email, passwordHash (for credentials), googleId (nullable), nid (optional), contact, role (user/admin).
·	Service: id, title, description, baseRate (per hour/day), category (baby/elderly/sick), active.
·	Booking: id, userId, serviceId, durationUnit (hour/day), durationValue, location (division/district/city/area), address, totalCost, status, createdAt.
·	Payment: id, bookingId, stripePaymentIntentId, amount, currency, status, receiptUrl, createdAt.
·	Audit/Event: id, userId, type, message, metadata, createdAt (optional for admin insights).
Industry-standard folder structure (Next.js + TypeScript + Shadcn UI)

src/
  app/
    (marketing)/
      layout.tsx
      page.tsx
    (protected)/
      layout.tsx
      my-bookings/
        page.tsx
      booking/
        [serviceId]/
          page.tsx
    service/
      [serviceId]/
        page.tsx
    api/
      auth/[...nextauth]/route.ts
      bookings/route.ts
      bookings/[id]/cancel/route.ts
      payments/stripe/webhook/route.ts
    admin/
      layout.tsx
      page.tsx
      payments/
        page.tsx
      services/
        page.tsx
    not-found.tsx
    layout.tsx
    page.tsx
  components/
    ui/            // Shadcn components
    forms/
    layout/
    navigation/
    cards/
    booking/
  features/
    auth/
      components/
      hooks/
      server/
    booking/
      components/
      hooks/
      server/
    payments/
      components/
      server/
    services/
      components/
      server/
    admin/
      components/
      server/
  lib/
    auth.ts
    prisma.ts
    stripe.ts
    email.ts
    validation.ts
    cost.ts
    locations.ts
    metadata.ts
    utils.ts
  styles/
    globals.css
    theme.css
  db/
    schema.prisma
    migrations/
  types/
    booking.ts
    service.ts
    user.ts
    payment.ts
  config/
    constants.ts
    env.ts
  middleware.ts
  env.d.ts


Sources: Application code is organized by feature domains to maximize cohesion and maintainability. Server-side logic lives in feature/server and lib; UI in components and features.


Pages and routing
·	Homepage: Banner/slider, mission, service overview, testimonials/success metrics.
·	Service detail: /service/[serviceId] with detailed information and a Book Service button.
·	Booking page: /booking/[serviceId] (private). Steps: duration → location → address → dynamic total cost → confirm.
·	Auth: Login and registration (NID, name, email, contact, password with validation rules).
·	My bookings: /my-bookings (private). List of bookings with View Details and Cancel.
·	Admin dashboard: /admin for bookings, payments, services management.
·	Error page (404): not-found.tsx  with a return to Home button.
Environment variables
·	Auth: NEXTAUTH_URL, NEXTAUTH_SECRET
·	Google OAuth: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET
·	Database: DATABASE_URL (PostgreSQL)
·	Stripe: STRIPE_PUBLIC_KEY, STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET
·	Email: RESEND_API_KEY (or provider of choice)
·	App config: APP_BASE_URL, APP_ENV
Cost calculation logic
·	Base formula: totalCost = baseRate × durationValue based on the chosen duration unit (hour/day).
·	Adjustments: Optional surcharges for specific areas, time windows (e.g., night shifts), or special care requirements.
·	Validation: Zod schema ensures numeric ranges, supported units, and safe totals.
Design system and UX principles
·	Shadcn UI: Use standardized components for forms, modals, tables, cards, and navigation.
·	Theme: Dark and light mode with consistent tokens (colors, spacing, typography).
·	Accessibility: Focus states, ARIA labels, keyboard navigation, and readable contrast.
·	Visual hierarchy: Clear call-to-action buttons, prominent booking flow, status badges.
Day-by-day execution guideline
Week 1: Foundations and auth
1.	Day 1 — Project setup
o	Initialize: Next.js  with TypeScript, Tailwind CSS, Shadcn UI.
o	Configure: App Router structure, base layouts, global styles, ESLint/Prettier, Biome optional.
o	Scaffold: src folders, environment loader (config/env.ts), metadata defaults.
1.	Day 2 — Database and models
o	Define: Prisma schema (User, Service, Booking, Payment).
o	Migrate: Set up PostgreSQL and run initial migrations.
o	Seed: Basic services (Baby, Elderly, Sick) with example rates.
1.	Day 3 — Authentication
o	NextAuth: Credentials and Google provider setup.
o	Sessions: Configure JWT or database sessions, secure cookies.
o	UI: Login and Registration pages with validation (6+ chars, 1 uppercase, 1 lowercase).
1.	Day 4 — Core pages (marketing)
o	Homepage: Banner, mission, service overview, testimonials.
o	Metadata: Title/description and OG tags for home.
1.	Day 5 — Service detail
o	Dynamic route: /service/[serviceId] with service descriptions and pricing.
o	CTA: Book Service button initiates protected booking flow.
o	Metadata: Service-specific titles/descriptions.
Week 2: Booking, payments, and emails
1.	Day 6 — Booking flow (UI)
o	Steps: Duration selector, location hierarchy (division → district → city → area), address input.
o	Live cost: Dynamic total calculation with Shadcn UI components.
1.	Day 7 — Booking flow (server)
o	Validation: Zod schemas and server actions to persist bookings as Pending.
o	Security: Private route guards; ensure logged-in users don’t get redirected unnecessarily.
1.	Day 8 — Payments
o	Stripe: Client elements and server intent creation.
o	Webhook: On successful payment, mark booking Confirmed and persist Payment record.
o	Error handling: Graceful failures and retries.
1.	Day 9 — Email invoices
o	Template: HTML invoice with booking details and receipt link.
o	Trigger: Send on payment success or booking confirmation.
o	Logging: Store email events for admin visibility.
1.	Day 10 — My bookings
o	List: Paginated table with status badges, total cost, and details.
o	Actions: Cancel booking (business rules to prevent cancelling after start).
Week 3: Admin, polish, and deployment
1.	Day 11 — Admin dashboard
o	Pages: Overview, payments, services management.
o	Controls: Update status, adjust pricing, search/filter bookings.
1.	Day 12 — QA and testing
o	Unit tests: Cost calculation, validation, auth guards.
o	Integration: Payment webhook, booking creation, email sending.
o	Accessibility: Keyboard navigation and color contrast.
1.	Day 13 — Performance and security
o	Optimization: Server components where possible, caching, image optimization.
o	Security: Rate limits, CSRF, input sanitization, secure headers, cookie flags.
1.	Day 14 — Deployment
o	Hosting: Deploy Next.js  app; configure environment variables.
o	Database: Provision managed PostgreSQL; run migrations and seed.
o	Webhooks: Expose and verify Stripe webhook; test end-to-end flow.
API and server actions overview
·	Auth routes: /api/auth/[...nextauth] for login, registration, and Google OAuth.
·	Booking routes: Create, list, cancel bookings with server-side validation and session checks.
·	Payment webhook: /api/payments/stripe/webhook to confirm payments and update bookings.
·	Admin actions: Protected routes for services and payment histories.
Security considerations
·	Authentication: Secure cookies, short-lived tokens, strict session checks on private routes.
·	Validation: Zod schemas for all forms and API inputs; reject invalid or suspicious payloads.
·	CSRF & rate limiting: Protect mutating endpoints; throttle high-risk routes.
·	Secrets management: Environment variables only; never commit secrets.
·	RBAC: Admin-only access for dashboards and payment management.
·	Webhooks: Verify Stripe signatures before processing; idempotent updates.
Testing strategy
·	Unit tests: Cost calculation, validation schemas, utility functions.
·	Integration tests: Auth flows, booking creation, Stripe webhook processing, invoice email.
·	E2E smoke tests: User journey from browsing to payment and My Bookings.
·	Accessibility tests: Keyboard and screen reader checks.
Deployment strategy
·	App hosting: Deploy the Next.js  application with environment variables configured per environment.
·	Database: Managed PostgreSQL; use Prisma migrations during release.
·	Payments: Register webhook endpoint and verify signatures in production.
·	Email: Configure provider and domain settings for reliable delivery.
·	Monitoring: Use application logs and error tracking for observability.
Future improvements
·	Caregiver profiles: Ratings, certifications, language skills, and availability calendars.
·	Advanced pricing: Time-of-day surcharges, special care modifiers, and subscription bundles.
·	Localization: Full Bengali UI with date/time and address formatting.
·	Notifications: SMS/WhatsApp status updates in addition to email.
·	Scheduling: Real-time availability and rescheduling workflows.
·	Audit trails: Rich event logs for transparency and compliance.
Next steps
·	Confirm data fields: For NID and location hierarchies specific to Bangladesh.
·	Decide hosting providers: For database and email to match budget and latency needs.
·	Lock design system: Finalize brand palette, typography, and component variants in Shadcn.


