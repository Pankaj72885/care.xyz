Care.xyz  development plan, commits, Prisma, and Zod blueprints
You’ll have a practical, step-by-step plan with focused branches, atomic commits, and ready-to-drop schema/validation. The flow matches Next.js  App Router with TypeScript, Shadcn UI, NextAuth (credentials + Google), Prisma + PostgreSQL, Stripe payments, and Resend emails.
Day-by-day tasks with branches and commit messages
Week 1: Foundations and auth
Day 1: Project scaffolding and baseline setup
·	Branch: chore/project-setup
·	Tasks:
o	Init Next.js  + TS + Tailwind + Shadcn: Create app with App Router, add Tailwind and Shadcn UI configuration.
o	Configs: ESLint + Prettier/Biome, tsconfig, postcss, tailwind.config.
o	Layouts: Global layout, theme provider, dark/light toggle, base navigation.
o	Env loader: Create src/config/env.ts with safe parsing.
·	Commits:
o	chore(init): bootstrap Next.js (App Router) with TypeScript
o	chore(ui): configure Tailwind + Shadcn UI and import base components
o	chore(config): add ESLint + Prettier and project scripts
o	feat(theme): add dark/light mode with theme provider and toggle
o	chore(env): add typed environment loader and example .env
Day 2: Database models and Prisma integration
·	Branch: feat/db-schema
·	Tasks:
o	Prisma install: Configure PostgreSQL DATABASE_URL.
o	Schema: Add User, Service, Booking, Payment.
o	Migrations: Run initial migration and seed base services.
o	Prisma client: Singleton src/lib/prisma.ts.
·	Commits:
o	feat(db): add Prisma and PostgreSQL configuration
o	feat(db): define Prisma schema for users, services, bookings, payments
o	feat(db): seed base caregiving services with rates
o	chore(db): add prisma client singleton
Day 3: Authentication (NextAuth credentials + Google)
·	Branch: feat/auth
·	Tasks:
o	NextAuth config: Credentials provider (hashing), Google OAuth.
o	Models: NID, contact, role added in schema (if not already).
o	Pages: Login, Register; guards for protected routes.
o	Session strategy: JWT; secure cookie setup.
·	Commits:
o	feat(auth): configure NextAuth with credentials + Google provider
o	feat(auth): add register + login pages with Shadcn forms
o	feat(auth): add server-side session helpers and route guards
o	fix(auth): prevent redirect loop on private routes for logged-in users
Day 4: Marketing homepage and SEO metadata
·	Branch: feat/homepage
·	Tasks:
o	Homepage: Banner, mission, services overview, testimonials.
o	Metadata: Title/description, OG tags.
·	Commits:
o	feat(home): add responsive homepage with mission and services overview
o	feat(seo): implement Next.js metadata for home and OG images
Day 5: Service detail page and booking CTA
·	Branch: feat/service-detail
·	Tasks:
o	Dynamic route: /service/[serviceId], fetch from DB.
o	UI: Detail card, rate info, FAQ, “Book Service” CTA.
o	Metadata: Service-specific SEO.
·	Commits:
o	feat(service): add dynamic service detail route
o	feat(service): service page components and call-to-action
o	feat(seo): service metadata with dynamic title + description
Week 2: Booking, payments, email
Day 6: Booking UI flow
·	Branch: feat/booking-ui
·	Tasks:
o	Route: /booking/[serviceId] (protected).
o	Steps: Duration selector; location (division → district → city → area); address.
o	Dynamic total: Live calculation from rate × duration.
·	Commits:
o	feat(booking): scaffold protected booking route
o	feat(booking): add stepper UI and duration selector
o	feat(booking): hierarchical location selectors with cached lists
o	feat(booking): dynamic total cost calculation and preview
Day 7: Booking server actions and validation
·	Branch: feat/booking-server
·	Tasks:
o	Server action/API: Create booking (status = Pending).
o	Zod validation: Inputs for create and cancel.
o	Guard: Ensure user session and ownership on list/cancel.
·	Commits:
o	feat(api): booking create server action with zod validation
o	feat(api): booking list for authenticated user
o	feat(api): cancel booking route with business rules
Day 8: Stripe payments integration
·	Branch: feat/payments
·	Tasks:
o	Intent: Create PaymentIntent server-side.
o	Stripe Elements: Client-side card entry.
o	Hook flow: On successful payment, set booking Confirmed and record payment.
·	Commits:
o	feat(payments): integrate Stripe Elements on booking confirmation
o	feat(payments): server-side PaymentIntent creation
o	feat(payments): webhook to confirm payment and update booking
o	fix(payments): idempotent webhook handler and signature verification
Day 9: Email invoice
·	Branch: feat/emails
·	Tasks:
o	Email provider: Resend (or similar).
o	Template: HTML invoice with booking + receipt URL.
o	Trigger: On payment success or booking confirmation.
·	Commits:
o	feat(email): add transactional email service with invoice template
o	feat(email): send invoice on booking confirmation
o	chore(email): log delivery status for admin visibility
Day 10: My bookings dashboard
·	Branch: feat/my-bookings
·	Tasks:
o	Page: List with pagination, status badges, actions.
o	Cancel: Respect business rules and reflect UI immediately.
·	Commits:
o	feat(user): my bookings page with table and status badges
o	feat(user): booking cancel action and optimistic UI update
Week 3: Admin, QA, deploy
Day 11: Admin dashboard
·	Branch: feat/admin
·	Tasks:
o	Pages: Overview; payments; services management.
o	RBAC: Only admins; update status and rates; search/filter.
·	Commits:
o	feat(admin): admin layout and overview cards
o	feat(admin): payments list and booking status controls
o	feat(admin): manage services (create, update, toggle active)
Day 12: Testing and accessibility
·	Branch: test/qa
·	Tasks:
o	Unit tests: Zod schemas, cost calc, utils.
o	Integration: Auth, booking creation, webhook.
o	Accessibility: Focus states, ARIA, contrasts.
·	Commits:
o	test(unit): add tests for validation and cost calculation
o	test(integration): auth and booking flow
o	chore(a11y): improve keyboard navigation and labels
Day 13: Performance and security
·	Branch: perf-sec/hardening
·	Tasks:
o	Perf: Server components, caching, image optimization.
o	Security: Rate limiting, secure headers, CSRF, cookie flags.
·	Commits:
o	perf(app): server component adoption and memoization
o	perf(media): image optimization and caching
o	sec(api): add rate limiting and secure headers
o	sec(auth): enforce cookie flags and CSRF protection
Day 14: Deployment
·	Branch: deploy/production
·	Tasks:
o	Env: Configure all secrets and URLs.
o	DB: Migrate and seed.
o	Payments: Stripe webhook set and tested.
·	Commits:
o	chore(deploy): production env configuration
o	chore(db): run migrations and seed production data
o	chore(payments): register webhook and smoke test payment flow
Prisma schema blueprint
prisma
// prisma/schema.prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum Role {
  USER
  ADMIN
}

enum BookingStatus {
  PENDING
  CONFIRMED
  COMPLETED
  CANCELLED
}

enum DurationUnit {
  HOUR
  DAY
}

model User {
  id            String   @id @default(cuid())
  email         String   @unique
  passwordHash  String?  // null if using Google only
  googleId      String?  @unique
  name          String
  nid           String?  @unique
  contact       String?
  role          Role     @default(USER)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  bookings      Booking[]
  payments      Payment[]
}

model Service {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  description String
  category    String   // "baby" | "elderly" | "sick" (can convert to enum later)
  baseRate    Int      // minor unit (e.g., BDT in smallest unit or raw integer)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  bookings    Booking[]
}

model Booking {
  id            String        @id @default(cuid())
  userId        String
  serviceId     String
  durationUnit  DurationUnit
  durationValue Int
  division      String
  district      String
  city          String
  area          String
  address       String
  totalCost     Int
  status        BookingStatus @default(PENDING)
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt

  user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  service Service @relation(fields: [serviceId], references: [id], onDelete: Restrict)
  payment Payment?
}

model Payment {
  id                     String      @id @default(cuid())
  bookingId              String      @unique
  amount                 Int
  currency               String      // e.g., "BDT"
  stripePaymentIntentId  String      @unique
  status                 String      // "succeeded" | "processing" | "requires_action" | ...
  receiptUrl             String?
  createdAt              DateTime    @default(now())

  booking Booking @relation(fields: [bookingId], references: [id], onDelete: Cascade)
}


Zod validation schemas
User registration schema

import { z } from "zod";

export const registerSchema = z.object({
  nid: z
    .string()
    .min(10, "NID must be at least 10 characters")
    .max(20, "NID is too long")
    .optional(),
  name: z.string().min(2, "Name is required"),
  email: z.string().email("Invalid email address"),
  contact: z
    .string()
    .min(6, "Contact must be valid")
    .max(20, "Contact too long")
    .optional(),
  password: z
    .string()
    .min(6, "Password must be at least 6 characters")
    .regex(/[A-Z]/, "Password must include at least one uppercase letter")
    .regex(/[a-z]/, "Password must include at least one lowercase letter"),
});

export type RegisterInput = z.infer<typeof registerSchema>;


Booking creation schema

import { z } from "zod";

export const durationUnitEnum = z.enum(["HOUR", "DAY"]);

export const bookingCreateSchema = z.object({
  serviceId: z.string().min(1, "Service ID is required"),
  durationUnit: durationUnitEnum,
  durationValue: z
    .number()
    .int("Duration must be an integer")
    .min(1, "Duration must be at least 1")
    .max(720, "Duration too long"), // cap to 30 days or 720 hours
  division: z.string().min(2, "Division is required"),
  district: z.string().min(2, "District is required"),
  city: z.string().min(2, "City is required"),
  area: z.string().min(2, "Area is required"),
  address: z.string().min(6, "Address is required"),
});

export type BookingCreateInput = z.infer<typeof bookingCreateSchema>;

Booking cancel schema

import { z } from "zod";

export const bookingCancelSchema = z.object({
  bookingId: z.string().min(1, "Booking ID is required"),
  reason: z.string().min(3).max(200).optional(),
});

Stripe PaymentIntent creation schema

import { z } from "zod";

export const paymentIntentSchema = z.object({
  bookingId: z.string().min(1),
  amount: z.number().int().min(100, "Amount must be at least 100"),
  currency: z.enum(["BDT", "USD"]), // prefer BDT, allow USD for testing
});

Stripe webhook event schema (simplified)
import { z } from "zod";

export const stripeWebhookSchema = z.object({
  type: z.string(), // e.g., "payment_intent.succeeded"
  data: z.object({
    object: z.object({
      id: z.string(),
      amount: z.number().int(),
      currency: z.string(),
      status: z.string(),
      charges: z.any().optional(), // narrow if needed
    }),
  }),
});

Environment variables required
·	NextAuth: NEXTAUTH_URL, NEXTAUTH_SECRET
·	Google OAuth: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET
·	Database: DATABASE_URL
·	Stripe: STRIPE_PUBLIC_KEY, STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET
·	Email: RESEND_API_KEY
·	App: APP_BASE_URL, APP_ENV
Suggested Git workflow
·	Main branches: main (protected), develop (integration).
·	Feature branches: feat/*, chore/*, fix/*, perf/*, sec/*, test/*, deploy/*.
·	PR cadence: Small, atomic PRs with clear scope; squash-merge to keep a clean history.
·	CI gates: Lint, typecheck, unit tests, build.


